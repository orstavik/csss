<test-html title="border+color+items">
  <div class="
  $palette(#ec1221)
  
  $border(solid,2px)
  |*$border(double,2px,radius(0.25rem))
  |.new$border(solid,4px,radius(1rem))
  |.sale$border(dashed,3px,radius(0.5rem))
                        
 $color(grey,text)
  |*$color(--primary)
  |.new$color(--secondary)
  |.sale$color(--tertiary)
           ">

    <div class="new">New Arrival: Product 1</div>
    <div class="sale $h(300px) $w(600px) $border(r(10px,30px,60px))">On Sale: Product 2</div>
    <div>Product 3</div>
    <div class="sale">On Sale: Product 4</div>
    <div class="new">New Arrival: Product 5</div>
  </div>
  <style>
    @layer container, items;

    @layer container {
      .\$palette\(\#ec1221\) {
        --primary: #ec1221;
        --secondary: oklch(from #ec1221 50 c calc(h - 60));
        --tertiary: oklch(from #ec1221 50 c calc(h + 60));
        --neutral: oklch(from #ec1221 50 0.02 h);
        --primary-chroma: 0.23746015283192687;
        --palette-bw-fg: 0;
        --palette-text-fg: 0.23;
        --palette-box-fg: 0.23;
        --palette-flip-fg: 0.99;
        --palette-darkflip-fg: 0.9;
        --palette-bw-bg: 1;
        --palette-text-bg: 0.99;
        --palette-box-bg: 0.92;
        --palette-flip-bg: 0.66;
        --palette-darkflip-bg: 0.33;
      }

      .\$border\(solid\,2px\) {
        border-style: solid;
        border-width: 2px;
      }

      .\$color\(grey\,text\) {
        color: oklch(from grey var(--palette-text-fg) calc(c - (c * max(var(--palette-text-fg) - .8, 0) * 5)) h);
        --background-color: oklch(from grey var(--palette-text-bg) calc(c - (c * max(var(--palette-text-bg) - .8, 0) * 5)) h);
        border-color: grey;
      }

      .\$h\(300px\) {
        block-size: 300px;
      }

      .\$w\(600px\) {
        inline-size: 600px;
      }

      .\$border\(r\(10px\,30px\,60px\)\) {
        border-style: solid;
        border-start-start-radius: 10px;
        border-end-end-radius: 60px;
        border-start-end-radius: 30px;
        border-end-start-radius: 30px;
      }
    }

    @layer items {
      .\|\*\$border\(double\,2px\,radius\(0\.25rem\)\)>* {
        border-style: double;
        border-width: 2px;
        border-radius: 0.25rem;
      }

      .\|\.new\$border\(solid\,4px\,radius\(1rem\)\)> :where(.new) {
        border-style: solid;
        border-width: 4px;
        border-radius: 1rem;
      }

      .\|\.sale\$border\(dashed\,3px\,radius\(0\.5rem\)\)> :where(.sale) {
        border-style: dashed;
        border-width: 3px;
        border-radius: 0.5rem;
      }

      .\|\*\$color\(--primary\)>* {
        color: oklch(from var(--primary) var(--palette-text-fg) calc(c - (c * max(var(--palette-text-fg) - .8, 0) * 5)) h);
        --background-color: oklch(from var(--primary) var(--palette-text-bg) calc(c - (c * max(var(--palette-text-bg) - .8, 0) * 5)) h);
        border-color: var(--primary);
      }

      .\|\.new\$color\(--secondary\)> :where(.new) {
        color: oklch(from var(--secondary) var(--palette-text-fg) calc(c - (c * max(var(--palette-text-fg) - .8, 0) * 5)) h);
        --background-color: oklch(from var(--secondary) var(--palette-text-bg) calc(c - (c * max(var(--palette-text-bg) - .8, 0) * 5)) h);
        border-color: var(--secondary);
      }

      .\|\.sale\$color\(--tertiary\)> :where(.sale) {
        color: oklch(from var(--tertiary) var(--palette-text-fg) calc(c - (c * max(var(--palette-text-fg) - .8, 0) * 5)) h);
        --background-color: oklch(from var(--tertiary) var(--palette-text-bg) calc(c - (c * max(var(--palette-text-bg) - .8, 0) * 5)) h);
        border-color: var(--tertiary);
      }
    }
  </style>
</test-html>
<test-html title="border-radius">
  <div class="$border(0,radius(1rem))">hello</div>
  <style>
    @layer container, items;

    @layer container {
      .\$border\(0\,radius\(1rem\)\) {
        border-style: solid;
        border-width: 0px;
        border-radius: 1rem;
      }
    }

    @layer items {}
  </style>
</test-html>
<test-html title="big border">
  <div class="$border(w(0,1px,2px,),s(.,.,solid,dashed))">sunshine</div>
  <style>
    @layer container, items;

    @layer container {
      .\$border\(w\(0\,1px\,2px\,\)\,s\(\.\,\.\,solid\,dashed\)\) {
        border-style: solid;
        border-block-width: 0px 2px;
        border-inline-start-width: 1px;
        border-block-start-style: unset;
        border-inline-start-style: unset;
        border-block-end-style: solid;
        border-inline-end-style: dashed;
      }
    }

    @layer items {}
  </style>
</test-html>
<test-html title="border-thin">
  <div class="$border(thin)">!!!</div>
  <style>
    @layer container, items;

    @layer container {
      .\$border\(thin\) {
        border-style: solid;
        border-width: thin;
      }
    }

    @layer items {}
  </style>
</test-html>
<test-html title="$palette(blue) $color(oklch(green,.5,.85,h))">
  <div class="$palette(blue) $color(oklch(green,.5,.85,h))">
    hello
  </div>
  <style>
    @layer container, items;

    @layer container {
      .\$palette\(blue\) {
        --primary: blue;
        --secondary: oklch(from blue 50 c calc(h - 60));
        --tertiary: oklch(from blue 50 c calc(h + 60));
        --neutral: oklch(from blue 50 0.02 h);
        --primary-chroma: 0.3132940092833078;
        --palette-bw-fg: 0;
        --palette-text-fg: 0.23;
        --palette-box-fg: 0.23;
        --palette-flip-fg: 0.99;
        --palette-darkflip-fg: 0.9;
        --palette-bw-bg: 1;
        --palette-text-bg: 0.99;
        --palette-box-bg: 0.92;
        --palette-flip-bg: 0.66;
        --palette-darkflip-bg: 0.33;
      }

      .\$color\(oklch\(green\,\.5\,\.85\,h\)\) {
        color: oklch(from oklch(from green .5 .85 h) var(--palette-text-fg) calc(c - (c * max(var(--palette-text-fg) - .8, 0) * 5)) h);
        --background-color: oklch(from oklch(from green .5 .85 h) var(--palette-text-bg) calc(c - (c * max(var(--palette-text-bg) - .8, 0) * 5)) h);
        border-color: oklch(from green 0.5 0.85 h);
      }
    }

    @layer items {}
  </style>
</test-html>
<test-html title="$palette(blue) $color(rgb(0,12,255,0.6))">
  <div class="$palette(blue) $color(rgb(0,12,255,0.6))">
    hello
  </div>
  <style>
    @layer container, items;

    @layer container {
      .\$palette\(blue\) {
        --primary: blue;
        --secondary: oklch(from blue 50 c calc(h - 60));
        --tertiary: oklch(from blue 50 c calc(h + 60));
        --neutral: oklch(from blue 50 0.02 h);
        --primary-chroma: 0.3132940092833078;
        --palette-bw-fg: 0;
        --palette-text-fg: 0.23;
        --palette-box-fg: 0.23;
        --palette-flip-fg: 0.99;
        --palette-darkflip-fg: 0.9;
        --palette-bw-bg: 1;
        --palette-text-bg: 0.99;
        --palette-box-bg: 0.92;
        --palette-flip-bg: 0.66;
        --palette-darkflip-bg: 0.33;
      }

      .\$color\(rgb\(0\,12\,255\,0\.6\)\) {
        color: oklch(from rgba(0 12 255 / 0.6) var(--palette-text-fg) calc(c - (c * max(var(--palette-text-fg) - .8, 0) * 5)) h);
        --background-color: oklch(from rgba(0 12 255 / 0.6) var(--palette-text-bg) calc(c - (c * max(var(--palette-text-bg) - .8, 0) * 5)) h);
        border-color: rgba(0, 12, 255, 0.6);
      }
    }

    @layer items {}
  </style>
</test-html>
<test-html title="$w(minContent)">
  <div class="$w(minContent)">
    hello
  </div>
  <style>
    @layer container, items;

    @layer container {
      .\$w\(minContent\) {
        inline-size: min-content;
      }
    }

    @layer items {}
  </style>
</test-html>
<test-html title="$w(minContent,2px,maxContent)">
  <style>
    @layer container, items;

    @layer container {

      .\$w\(minContent\,2px\,maxContent\) {
        min-inline-size: min-content;
        inline-size: 2px;
        max-inline-size: max-content;
      }
    }

    @layer items {}
  </style>
  <div class="$w(minContent,2px,maxContent)">
    hello
  </div>
</test-html>
<test-html title="$w(1px,2px,)">
  <style>
    @layer container, items;

    @layer container {
      .\$w\(1px\,2px\,\) {
        min-inline-size: 1px;
        inline-size: 2px;
      }
    }

    @layer items {}
  </style>
  <div class="$w(1px,2px,)">
    hello
  </div>
</test-html>
<test-html title="$h(,2px,)">
  <style>
    @layer container, items;

    @layer container {
      .\$h\(\,2px\,\) {
        block-size: 2px;
      }
    }

    @layer items {}
  </style>
  <div class="$h(,2px,)">
    hello
  </div>
</test-html>
<test-html title="$flex(row-reverse,p(1%,,3%),gap(,3rem))">
  <div class="$flex(row-reverse,p(1%,,3%),gap(,3rem))">
    hello
  </div>
  <style>
    @layer container, items;

    @layer container {
      .\$flex\(row-reverse\,p\(1\%\,\,3\%\)\,gap\(\,3rem\)\) {
        display: flex;
        word-spacing: unset;
        line-height: unset;
        white-space: unset;
        hyphens: unset;
        text-align: unset;
        text-indent: unset;
        flex-direction: row-reverse;
        padding-block: 1% 3%;
        row-gap: 3rem;
      }
    }

    @layer items {}
  </style>
</test-html>
<test-html title="$flex(...) |$_flex">
  <div class="
  $flex(gap(4px),padding(22px,33px,44px))
  |$_flex(margin(,0.1px,,20%))">
    hello
  </div>
  <style>
    @layer container, items;

    @layer container {
      .\$flex\(gap\(4px\)\,padding\(22px\,33px\,44px\)\) {
        display: flex;
        word-spacing: unset;
        line-height: unset;
        white-space: unset;
        hyphens: unset;
        text-align: unset;
        text-indent: unset;
        gap: 4px;
        padding-block: 22px 44px;
        padding-inline: 33px;
      }
    }

    @layer items {
      .\|\$_flex\(margin\(\,0\.1px\,\,20\%\)\)>* {
        margin-inline: 0.1px 20%;
      }
    }
  </style>
</test-html>
<test-html title="$flex(cc) |*$_flex(margin(10px))">
  <div class="$flex(cc) |*$_flex(margin(10px))">
    hello
  </div>
  <style>
    @layer container, items;

    @layer container {
      .\$flex\(cc\) {
        display: flex;
        word-spacing: unset;
        line-height: unset;
        white-space: unset;
        hyphens: unset;
        text-align: unset;
        text-indent: unset;
        place-content: center;
        align-items: unset;
      }
    }

    @layer items {
      .\|\*\$_flex\(margin\(10px\)\)>* {
        margin: 10px;
      }
    }
  </style>
</test-html>
<test-html title="$flex(ellipsis)">
  <div class="$flex(ellipsis)">
    hello
  </div>
  <style>
    @layer container, items;

    @layer container {
      .\$flex\(ellipsis\) {
        display: flex;
        word-spacing: unset;
        line-height: unset;
        white-space: nowrap;
        hyphens: unset;
        text-align: unset;
        text-indent: unset;
        text-overflow: ellipsis;
      }
    }

    @layer items {}
  </style>
</test-html>
<test-html title="$flex |$_flex(items)">
  <style>
    @layer container, items;

    @layer container {
      .\$flex\(gap\(1rem\)\,visible\:auto\,padding\(1rem\)\)\$w\(80\%\) {
        display: flex;
        word-spacing: unset;
        line-height: unset;
        white-space: unset;
        hyphens: unset;
        text-align: unset;
        text-indent: unset;
        gap: 1rem;
        overflow: visible;
        padding: 1rem;
        inline-size: 80%;
      }
    }

    @layer items {
      .\|\*\$_flex\(shrink\(0\)\,center\,w\(7rem\)\,h\(3rem\)\)>* {
        flex-shrink: 0;
        align-self: center;
        text-align: center;
        inline-size: 7rem;
        block-size: 3rem;
      }
    }
  </style>
  <div class="
    $flex(gap(1rem),visible:auto,padding(1rem))$w(80%)
    |*$_flex(shrink(0),center,w(7rem),h(3rem))">
    hello
  </div>
</test-html>
<test-html title="$cursor(pointer)">
  <div class="$cursor(pointer)">
    hello
  </div>
  <style>
    @layer container, items;

    @layer container {
      .\$cursor\(pointer\) {
        cursor: pointer;
      }
    }

    @layer items {}
  </style>
</test-html>
<test-html title="$cursor(ew-resize)">
  <div class="$cursor(ew-resize)">
    hello
  </div>
  <style>
    @layer container, items;

    @layer container {
      .\$cursor\(ew-resize\) {
        cursor: ew-resize;
      }
    }

    @layer items {}
  </style>
</test-html>
<test-html title="$translate(10px)$rotate(45deg)">
  <div class="$translate(10px)$rotate(45deg)">
    hello
  </div>
  <style>
    @layer container, items;

    @layer container {
      .\$translate\(10px\)\$rotate\(45deg\) {
        transform: translate(10px) rotate(45deg);
      }
    }

    @layer items {}
  </style>
</test-html>

<test-html title="$font(times,serif,700,capitalize)">
  <main class="$font(times,serif,500,2px,italic)">
    <h2 class="$font(helvetica,arial,'sans-serif',900,capitalize)">
      $font(fontFamily[], fontStyle, fontWeight, fontVariant, fontStretch, textTransform, letterSpacing)
    </h2>
    Notes:
    <p>
      For future maybe because they are not widely supported: text-wrap&hypens
    </p>
    <p class="$font('comic+sans',lucida,'DejaVu+Sans+Mono')">goofy</p>
  </main>
  <style>
    @layer container, items;

    @layer container {
      .\$font\(times\,serif\,500\,2px\,italic\) {
        font-style: italic;
        font-weight: 500;
        font-variant-caps: unset;
        font-stretch: unset;
        text-transform: unset;
        letter-spacing: 2px;
        font-family: "Times New Roman", serif;
      }

      .\$font\(helvetica\,arial\,\'sans-serif\'\,900\,capitalize\) {
        font-style: unset;
        font-weight: 900;
        font-variant-caps: unset;
        font-stretch: unset;
        text-transform: capitalize;
        letter-spacing: unset;
        font-family: "Helvetica Neue", Arial, "sans-serif";
      }

      .\$font\(\'comic\+sans\'\,lucida\,\'DejaVu\+Sans\+Mono\'\) {
        font-style: unset;
        font-weight: unset;
        font-variant-caps: unset;
        font-stretch: unset;
        text-transform: unset;
        letter-spacing: unset;
        font-family: "comic sans", "Lucida Sans Unicode", "DejaVu Sans Mono";
      }
    }

    @layer items {}
  </style>
</test-html>
<test-html title="Simple Paragraph Sample ($block with container-item)">
  <div class=" 
    $w(100%)
    $em(15px)
    
    $block(s,gap(0.3em,1em))
    |$_block(indent(15%))
    |.head$_block(indent(-5%))
    |.subheading$_block(indent(0))
    ">
    <h1 class="head">The Article Heading</h1>
    <h4 class="subheading">Sub-information... Lorem ipsum dolor sit amet. Et quia temporibus est officia ipsam a sunt
      voluptatem et autem ullam sit voluptate libero hic doloremque nobis eum dolor quas.
    </h4>
    <p>Lorem ipsum dolor sit amet. Et quia temporibus est officia ipsam a sunt voluptatem et autem ullam sit
      voluptate libero hic doloremque nobis eum dolor quas. Id magni tenetur aut exercitationem voluptates ut
      voluptates distinctio aut doloribus voluptatibus aut ipsa iusto eos asperiores velit aut rerum facilis.
      Ut itaque obcaecati et expedita voluptatibus et voluptas incidunt ut incidunt sunt vel totam laudantium eos
      velit veritatis.
    </p>
    <p>Ut incidunt cumque in perspiciatis reiciendis sed dolorum temporibus? Ut harum
      laudantium quo perferendis sint in laborum molestias qui aliquam dolore non consequatur enim aut
      eaque harum. Et minima dolores id pariatur quia ut accusamus placeat et odit quia sit cumque natus.
    </p>
    <p>Eum veniam laboriosam aut quia tempora et quas debitis et nulla minima ut autem assumenda.
      Eos nemo perferendis id libero numquam et maiores quam aut quis quis.
    </p>
  </div>
  <style>
    @layer container, items;

    @layer container {
      .\$w\(100\%\) {
        inline-size: 100%;
      }

      .\$em\(15px\) {
        font-size: 15px;
      }

      .\$block\(s\,gap\(0\.3em\,1em\)\) {
        display: block;
        word-spacing: 0.3em;
        line-height: 1em;
        white-space: unset;
        hyphens: unset;
        text-align: justify;
        text-indent: unset;
      }
    }

    @layer items {
      .\|\$_block\(indent\(15\%\)\)>* {
        text-indent: 15%;
      }

      .\|\.head\$_block\(indent\(-5\%\)\)> :where(.head) {
        text-indent: -5%;
      }

      .\|\.subheading\$_block\(indent\(0\)\)> :where(.subheading) {
        text-indent: 0px;
      }
    }
  </style>
</test-html>

<test-html title="@(print,screen):hover$border(solid,2px)|:valid$border(dotted,2px)|.first$border(dashed,2px)">
  <style>
    @layer container, items;

    @layer container {

      @media print,
      screen {
        .\@\(print\,screen\)\:hover\$border\(solid\,2px\):where(:hover) {
          border-style: solid;
          border-width: 2px;
        }
      }
    }

    @layer items {

      @media print,
      screen {
        .\@\(print\,screen\)\:hover\|\:valid\$border\(dotted\,2px\):where(:hover)> :where(:valid) {
          border-style: dotted;
          border-width: 2px;
        }
      }

      @media print,
      screen {
        .\@\(print\,screen\)\:hover\|\.first\$border\(dashed\,2px\):where(:hover)> :where(.first) {
          border-style: dashed;
          border-width: 2px;
        }
      }
    }
  </style>
  <div class="
    @(print,screen):hover$border(solid,2px)
    @(print,screen):hover|:valid$border(dotted,2px)
    @(print,screen):hover|.first$border(dashed,2px)">
    hello
  </div>
</test-html>

<test-html title="Border 8 - Calc Expressions">
  <main>
    <div class="$grid(cols(1fr,1fr),gap(1rem))">
      <div class="$border(solid,w(1px+1em)) $padding(1rem)">Calc width</div>
    </div>
  </main>
  <style>
    @layer container, items;

    @layer container {
      .\$grid\(cols\(1fr\,1fr\)\,gap\(1rem\)\) {
        display: grid;
        word-spacing: unset;
        line-height: unset;
        white-space: unset;
        hyphens: unset;
        text-align: unset;
        text-indent: unset;
        grid-template-columns: 1fr 1fr;
        gap: 1rem;
      }

      .\$border\(solid\,w\(1px\+1em\)\) {
        border-style: solid;
        border-width: calc(1em + 1px);
      }

      .\$padding\(1rem\) {
        padding: 1rem;
      }
    }

    @layer items {}
  </style>
</test-html>

<test-html title="Border 13 - Test on Auto Wrapping of var and calc">
  <main style="--border-width: 3px;">
    <div class="$grid(cols(1fr,1fr),gap(1rem))">
      <div class="$border(solid,w(--border-width)) $padding(1rem)">CSS Variable Auto-Wrap</div>
      <div class="$border(solid,w(1px+2px)) $padding(1rem)">Calculation Auto-Wrap</div>
    </div>
  </main>
  <style>
    @layer container, items;

    @layer container {
      .\$grid\(cols\(1fr\,1fr\)\,gap\(1rem\)\) {
        display: grid;
        word-spacing: unset;
        line-height: unset;
        white-space: unset;
        hyphens: unset;
        text-align: unset;
        text-indent: unset;
        grid-template-columns: 1fr 1fr;
        gap: 1rem;
      }

      .\$border\(solid\,w\(--border-width\)\) {
        border-style: solid;
        border-width: var(--border-width);
      }

      .\$padding\(1rem\) {
        padding: 1rem;
      }

      .\$border\(solid\,w\(1px\+2px\)\) {
        border-style: solid;
        border-width: calc(3px);
      }
    }

    @layer items {}
  </style>
</test-html>
<test-html title="$ultraCondensed">
  <div class="$ultraCondensed">
    hello
  </div>
  <style>
    @layer container, items;

    @layer container {
      .\$ultraCondensed {
        font-stretch: ultra-condensed;
      }
    }

    @layer items {}
  </style>

</test-html>
<test-html title="overline lineThrough">
  <div class="$lineThrough(3px)">hello</div>
  <div class="$overLine(2px)">sunshine</div>
  <style>
    @layer container, items;

    @layer container {
      .\$lineThrough\(3px\) {
        text-decoration-line: line-through;
        text-decoration-thickness: 3px;
        text-decoration-style: solid;
        text-decoration-color: var(--text-decoration-color, currentcolor);
      }

      .\$overLine\(2px\) {
        text-decoration-line: overline;
        text-decoration-thickness: 2px;
        text-decoration-style: solid;
        text-decoration-color: var(--text-decoration-color, currentcolor);
      }
    }

    @layer items {}
  </style>
</test-html>
<test-html title="Text Decoration - Basic Test">
  <main>
    <h2>Grammar & Spelling</h2>
    <div class="$grammarError(2px)">grammarError(2px)</div>
    <h2>Default (no style)</h2>
    <div class="$overUnderLineThrough(2px)">overUnderLineThrough(2px)</div>
    <h2>Styles</h2>
    <div class="$wavyOverUnderLineThrough(2px)">wavyOverUnderLineThrough(2px)</div>
    <div class="$dottedUnderLine(2px)">dottedUnderLine(2px)</div>
    <div class="$dashedOverUnderLineThrough(2px)">dashedOverUnderLineThrough(2px)</div>
    <div class="$doubleOverLine(2px)">doubleOverLine(2px)</div>
  </main>
  <style>
    @layer container, items;

    @layer container {
      .\$grammarError\(2px\) {
        text-decoration-line: grammar-error;
        text-decoration-thickness: 2px;
        text-decoration-color: var(--text-decoration-color, currentcolor);
      }

      .\$overUnderLineThrough\(2px\) {
        text-decoration-line: underline overline line-through;
        text-decoration-thickness: 2px;
        text-decoration-style: solid;
        text-decoration-color: var(--text-decoration-color, currentcolor);
      }

      .\$wavyOverUnderLineThrough\(2px\) {
        text-decoration-line: underline overline line-through;
        text-decoration-thickness: 2px;
        text-decoration-style: wavy;
        text-decoration-color: var(--text-decoration-color, currentcolor);
      }

      .\$dottedUnderLine\(2px\) {
        text-decoration-line: underline;
        text-decoration-thickness: 2px;
        text-decoration-style: dotted;
        text-decoration-color: var(--text-decoration-color, currentcolor);
      }

      .\$dashedOverUnderLineThrough\(2px\) {
        text-decoration-line: underline overline line-through;
        text-decoration-thickness: 2px;
        text-decoration-style: dashed;
        text-decoration-color: var(--text-decoration-color, currentcolor);
      }

      .\$doubleOverLine\(2px\) {
        text-decoration-line: overline;
        text-decoration-thickness: 2px;
        text-decoration-style: double;
        text-decoration-color: var(--text-decoration-color, currentcolor);
      }
    }

    @layer items {}
  </style>
</test-html>
<test-html title="$lineClamp(2)">
  <div class="$lineClamp(2)"> hello </div>
  <script type="module">
    import { registerShort } from "/src/engine.js";
    registerShort("lineClamp", function (lines, ...args) {
      return this.block({
        display: "-webkit-box",
        WebkitLineClamp: lines,
        WebkitBoxOrient: "vertical",
        overflowY: "hidden"
      }, ...args);
    });
  </script>
  <style>
    @layer container, items;

    @layer container {
      .\$lineClamp\(2\) {
        display: -webkit-box;
        word-spacing: unset;
        line-height: unset;
        white-space: unset;
        hyphens: unset;
        text-align: unset;
        text-indent: unset;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow-y: hidden;
      }
    }

    @layer items {}
  </style>
</test-html>
<test-html title="$grid(layout,gap(2rem))">
  <main style="--color_bg: pink;" csss="OLD: $layout = $grid(cols(1fr,1fr,1fr))$gap(1rem);">
    <div class="$grid(layout,gap(2rem))">
      <div class="$color(white,blue,) $bg(--color_bg) $padding(1rem) $textAlign(center)">1</div>
      <div class="$color(white,yellow,) $bg(--color_bg) $padding(1rem) $textAlign(center)">2</div>
    </div>
    <script type="module">
      import { registerShort } from "/src/engine.js";
      registerShort("grid.layout", () => ({ gridTemplateColumns: "1fr 1fr 1fr", gap: "1rem" }));
    </script>
  </main>
  <style>
    @layer container, items;

    @layer container {
      .\$grid\(layout\,gap\(2rem\)\) {
        display: grid;
        word-spacing: unset;
        line-height: unset;
        white-space: unset;
        hyphens: unset;
        text-align: unset;
        text-indent: unset;
        grid-template-columns: 1fr 1fr 1fr;
        gap: 2rem;
      }

      .\$color\(white\,blue\,\) {
        color: white;
        --background-color: blue;
        border-color: white;
      }

      .\$bg\(--color_bg\) {
        background-image: linear-gradient(var(--color_bg));
        background-position: 0% 0%;
        background-repeat: repeat;
        background-size: auto;
        background-origin: padding-box;
        background-clip: border-box;
        background-blend-mode: normal;
        background-attachment: scroll;
      }

      .\$padding\(1rem\) {
        padding: 1rem;
      }

      .\$textAlign\(center\) {
        text-align: center;
      }

      .\$color\(white\,yellow\,\) {
        color: white;
        --background-color: yellow;
        border-color: white;
      }
    }

    @layer items {}
  </style>
</test-html>
<test-html title="$flex2">
  <main csss="OLD.  $flex2 = $flex(row,gap(1rem),textAlign(center),padding(1rem));">
    <div class="$flex2">
      <div class="$color(white,red,) $bg(red)">1</div>
      <div class="$color(white,green,) $bg(green)">2</div>
    </div>
  </main>
  <script type="module">
    import { registerShort } from "/src/engine.js";
    registerShort("flex2", function (...args) {
      return this.flex({
        display: "flex",
        flexDirection: "row",
        gap: "1rem",
        textAlign: "center",
        padding: "1rem"
      }, ...args)
    });
  </script>
  <style>
    @layer container, items;

    @layer container {
      .\$flex2 {
        display: flex;
        word-spacing: unset;
        line-height: unset;
        white-space: unset;
        hyphens: unset;
        text-align: center;
        text-indent: unset;
        flex-direction: row;
        gap: 1rem;
        padding: 1rem;
      }

      .\$color\(white\,red\,\) {
        color: white;
        --background-color: red;
        border-color: white;
      }

      .\$bg\(red\) {
        background-image: linear-gradient(red);
        background-position: 0% 0%;
        background-repeat: repeat;
        background-size: auto;
        background-origin: padding-box;
        background-clip: border-box;
        background-blend-mode: normal;
        background-attachment: scroll;
      }

      .\$color\(white\,green\,\) {
        color: white;
        --background-color: green;
        border-color: white;
      }

      .\$bg\(green\) {
        background-image: linear-gradient(green);
        background-position: 0% 0%;
        background-repeat: repeat;
        background-size: auto;
        background-origin: padding-box;
        background-clip: border-box;
        background-blend-mode: normal;
        background-attachment: scroll;
      }
    }

    @layer items {}
  </style>
</test-html>
<test-html title="Bug: empty argument on supershorts">
  <main csss="OLD:   $layout = $block$border;  ">
    <div class="$block(layout)">
      <h1>Hello Sunshine! This is error.</h1>
    </div>
    <div class="$block $border">
      <h1>Hello Sunshine! No error?</h1>
    </div>
    <script type="module">
      import { registerShort } from "/src/engine.js";
      registerShort("block.layout", function () {
        return this.$border(); //this throws an error
      });
    </script>
  </main>
  <style>
    @layer container, items;

    @layer container {

      .\$block {
        display: block;
        word-spacing: unset;
        line-height: unset;
        white-space: unset;
        hyphens: unset;
        text-align: unset;
        text-indent: unset;
      }

      .\$border {
        border-style: solid;
      }
    }

    @layer items {}
  </style>
</test-html>

<test-html title="transition">
  <div class="$border(dotted,50px,easeIn(10s))">Hello Sunshine!</div>
  <style>
    @layer container, items;

    @layer container {
      .\$border\(dotted\,50px\,easeIn\(10s\)\) {
        border-style: dotted;
        border-width: 50px;
        transition: border-width 10s ease-in;
      }
    }

    @layer items {}
  </style>
</test-html>